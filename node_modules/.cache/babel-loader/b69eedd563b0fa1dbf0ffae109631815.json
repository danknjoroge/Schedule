{"ast":null,"code":"import { STUDENT_USER_LOADED, STUDENT_USER_FAILED, TM_USER_LOADED, TM_USER_FAILED, LOGIN_SUCCESS, LOGIN_FAILED, LOGOUT_SUCCESS, REGISTER_FUSER_SUCCESS, REGISTER_FUSER_FAILED, REGISTER_CUSER_SUCCESS, REGISTER_CUSER_FAILED } from \"../actions/type\";\nconst initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: false,\n  isStudent: null,\n  isLoading: false,\n  user: null\n};\nexport const authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case REGISTER_CUSER_SUCCESS:\n    case REGISTER_FUSER_SUCCESS:\n      localStorage.setItem('token', action.payload.token);\n      return { ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        isStudent: action.payload.user.is_student,\n        isLoading: false\n      };\n\n    case STUDENT_USER_LOADED:\n      return { ...state,\n        isAuthenticated: true,\n        isStudent: true,\n        user: action.payload\n      };\n\n    case TM_USER_LOADED:\n      return { ...state,\n        isAuthenticated: true,\n        isLoading: false,\n        isStudent: false,\n        user: action.payload\n      };\n\n    case LOGIN_SUCCESS:\n      localStorage.setItem('token', action.payload.token);\n      return { ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        isLoading: false,\n        isStudent: action.payload.is_student\n      };\n\n    case REGISTER_CUSER_FAILED:\n    case REGISTER_FUSER_FAILED:\n    case LOGIN_FAILED:\n      localStorage.removeItem('token');\n      return { ...state,\n        token: null,\n        isStudent: null,\n        isAuthenticated: false,\n        isLoading: false\n      };\n\n    case STUDENT_USER_FAILED:\n    case TM_USER_FAILED:\n    case LOGOUT_SUCCESS:\n      localStorage.removeItem('token');\n      return { ...state,\n        token: null,\n        isStudent: null,\n        isAuthenticated: false,\n        isLoading: false\n      };\n  }\n\n  return state;\n};\nexport default authReducer;","map":{"version":3,"sources":["/home/moringa/Desktop/react/Class-Schedule-React/src/reducers/authReducer.js"],"names":["STUDENT_USER_LOADED","STUDENT_USER_FAILED","TM_USER_LOADED","TM_USER_FAILED","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_SUCCESS","REGISTER_FUSER_SUCCESS","REGISTER_FUSER_FAILED","REGISTER_CUSER_SUCCESS","REGISTER_CUSER_FAILED","initialState","token","localStorage","getItem","isAuthenticated","isStudent","isLoading","user","authReducer","state","action","type","setItem","payload","is_student","removeItem"],"mappings":"AAAA,SAASA,mBAAT,EAA8BC,mBAA9B,EAAmDC,cAAnD,EACIC,cADJ,EACoBC,aADpB,EACmCC,YADnC,EACgDC,cADhD,EACgEC,sBADhE,EAEIC,qBAFJ,EAE2BC,sBAF3B,EAEmDC,qBAFnD,QAGO,iBAHP;AAKA,MAAMC,YAAY,GAAC;AACfC,EAAAA,KAAK,EAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADS;AAEfC,EAAAA,eAAe,EAAC,KAFD;AAGfC,EAAAA,SAAS,EAAC,IAHK;AAIfC,EAAAA,SAAS,EAAC,KAJK;AAKfC,EAAAA,IAAI,EAAC;AALU,CAAnB;AAQA,OAAO,MAAMC,WAAW,GAAC,YAA8B;AAAA,MAA7BC,KAA6B,uEAAvBT,YAAuB;AAAA,MAATU,MAAS;;AACnD,UAAOA,MAAM,CAACC,IAAd;AACI,SAAKb,sBAAL;AACA,SAAKF,sBAAL;AACIM,MAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BF,MAAM,CAACG,OAAP,CAAeZ,KAA7C;AACA,aAAO,EACH,GAAGQ,KADA;AAEH,WAAGC,MAAM,CAACG,OAFP;AAGHT,QAAAA,eAAe,EAAC,IAHb;AAIHC,QAAAA,SAAS,EAACK,MAAM,CAACG,OAAP,CAAeN,IAAf,CAAoBO,UAJ3B;AAKHR,QAAAA,SAAS,EAAC;AALP,OAAP;;AAOJ,SAAKjB,mBAAL;AACI,aAAM,EACF,GAAGoB,KADD;AAEFL,QAAAA,eAAe,EAAC,IAFd;AAGFC,QAAAA,SAAS,EAAC,IAHR;AAIFE,QAAAA,IAAI,EAACG,MAAM,CAACG;AAJV,OAAN;;AAMA,SAAKtB,cAAL;AACI,aAAO,EACH,GAAGkB,KADA;AAEHL,QAAAA,eAAe,EAAC,IAFb;AAGHE,QAAAA,SAAS,EAAC,KAHP;AAIHD,QAAAA,SAAS,EAAC,KAJP;AAKHE,QAAAA,IAAI,EAACG,MAAM,CAACG;AALT,OAAP;;AAQR,SAAKpB,aAAL;AACIS,MAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BF,MAAM,CAACG,OAAP,CAAeZ,KAA7C;AACA,aAAO,EACH,GAAGQ,KADA;AAEH,WAAGC,MAAM,CAACG,OAFP;AAGHT,QAAAA,eAAe,EAAC,IAHb;AAIHE,QAAAA,SAAS,EAAC,KAJP;AAKHD,QAAAA,SAAS,EAACK,MAAM,CAACG,OAAP,CAAeC;AALtB,OAAP;;AASJ,SAAKf,qBAAL;AACA,SAAKF,qBAAL;AACA,SAAKH,YAAL;AACIQ,MAAAA,YAAY,CAACa,UAAb,CAAwB,OAAxB;AACA,aAAM,EACF,GAAGN,KADD;AAEFR,QAAAA,KAAK,EAAC,IAFJ;AAGFI,QAAAA,SAAS,EAAC,IAHR;AAIFD,QAAAA,eAAe,EAAC,KAJd;AAKFE,QAAAA,SAAS,EAAC;AALR,OAAN;;AAQA,SAAKhB,mBAAL;AACA,SAAKE,cAAL;AACA,SAAKG,cAAL;AACIO,MAAAA,YAAY,CAACa,UAAb,CAAwB,OAAxB;AACA,aAAO,EACH,GAAGN,KADA;AAEHR,QAAAA,KAAK,EAAC,IAFH;AAGHI,QAAAA,SAAS,EAAC,IAHP;AAIHD,QAAAA,eAAe,EAAC,KAJb;AAKHE,QAAAA,SAAS,EAAC;AALP,OAAP;AAtDZ;;AA8DA,SAAOG,KAAP;AACH,CAhEM;AAmEP,eAAeD,WAAf","sourcesContent":["import { STUDENT_USER_LOADED, STUDENT_USER_FAILED, TM_USER_LOADED,\n    TM_USER_FAILED, LOGIN_SUCCESS, LOGIN_FAILED,LOGOUT_SUCCESS, REGISTER_FUSER_SUCCESS,\n    REGISTER_FUSER_FAILED, REGISTER_CUSER_SUCCESS, REGISTER_CUSER_FAILED\n} from \"../actions/type\"\n\nconst initialState={\n    token:localStorage.getItem('token'),\n    isAuthenticated:false,\n    isStudent:null,\n    isLoading:false,\n    user:null\n}\n\nexport const authReducer=(state=initialState, action)=>{\n    switch(action.type){\n        case REGISTER_CUSER_SUCCESS:\n        case REGISTER_FUSER_SUCCESS:\n            localStorage.setItem('token', action.payload.token)\n            return {\n                ...state,\n                ...action.payload,\n                isAuthenticated:true,\n                isStudent:action.payload.user.is_student,\n                isLoading:false\n            }\n        case STUDENT_USER_LOADED:\n            return{\n                ...state,\n                isAuthenticated:true,\n                isStudent:true,\n                user:action.payload\n            }\n            case TM_USER_LOADED:\n                return {\n                    ...state,\n                    isAuthenticated:true,\n                    isLoading:false,\n                    isStudent:false,\n                    user:action.payload\n                }\n\n        case LOGIN_SUCCESS:\n            localStorage.setItem('token', action.payload.token)\n            return {\n                ...state,\n                ...action.payload,\n                isAuthenticated:true,\n                isLoading:false,\n                isStudent:action.payload.is_student,\n                \n            }\n\n        case REGISTER_CUSER_FAILED:\n        case REGISTER_FUSER_FAILED:\n        case LOGIN_FAILED:\n            localStorage.removeItem('token')\n            return{\n                ...state,\n                token:null,\n                isStudent:null,\n                isAuthenticated:false,\n                isLoading:false\n            }\n\n            case STUDENT_USER_FAILED:\n            case TM_USER_FAILED:\n            case LOGOUT_SUCCESS:\n                localStorage.removeItem('token')\n                return {\n                    ...state,\n                    token:null,\n                    isStudent:null,\n                    isAuthenticated:false,\n                    isLoading:false,\n                }\n    }\n    return state;\n}\n\n\nexport default authReducer"]},"metadata":{},"sourceType":"module"}